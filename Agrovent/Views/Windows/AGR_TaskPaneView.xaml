<UserControl x:Class="Agrovent.Views.Windows.AGR_TaskPaneView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Agrovent.Views.Windows"
             xmlns:StateEnum="clr-namespace:Xarial.XCad.Documents.Enums;assembly=Xarial.XCad"
             xmlns:System="clr-namespace:System;assembly=mscorlib"
             xmlns:VM="clr-namespace:Agrovent.ViewModels.Components"
             xmlns:locator="clr-namespace:Agrovent.ViewModels"
             xmlns:page="clr-namespace:Agrovent.Views.Pages"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <UserControl.Resources>
        <ResourceDictionary>
            <ObjectDataProvider x:Key="dataFromEnum" MethodName="GetValues"
                     ObjectType="{x:Type System:Enum}">
                <ObjectDataProvider.MethodParameters>
                    <x:Type TypeName="StateEnum:ComponentState_e"/>
                </ObjectDataProvider.MethodParameters>
            </ObjectDataProvider>
            <locator:ViewModelLocator x:Key="VMLocator"/>

            <DataTemplate DataType="{x:Type VM:AGR_PartComponentVM}">
                <page:AGR_PartPageView/>
            </DataTemplate>
            <DataTemplate DataType="{x:Type VM:AGR_AssemblyComponentVM}">
                <page:AGR_AssemblyPageView/>
            </DataTemplate>
            <DataTemplate DataType="{x:Type VM:AGR_HomePageVM}">
                <page:AGR_EmptyPage/>
            </DataTemplate>
            
            <BooleanToVisibilityConverter x:Key="BoolToVis"/>
            
        </ResourceDictionary>
    </UserControl.Resources>

    <UserControl.DataContext>
        <Binding Path="TaskPaneVM" Source="{StaticResource VMLocator}"/>
    </UserControl.DataContext>

    <Grid>
        <Border Visibility="{Binding IsLoading, Converter={StaticResource BoolToVis}}"
                Background="#CCFFFFFF"
                Panel.ZIndex="1000">
            <Grid>
                <Border Background="#FFFFFFFF" 
                        BorderBrush="#FF007ACC" 
                        BorderThickness="1"
                        CornerRadius="8"
                        Width="300"
                        Height="150"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center">
                    <StackPanel Orientation="Vertical"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Margin="20">
                        <ProgressBar IsIndeterminate="True"
                                     Height="20"
                                     Margin="0,0,0,10"/>
                        <TextBlock Text="{Binding LoadingMessage}"
                                   HorizontalAlignment="Center"
                                   FontSize="14"
                                   Foreground="#FF333333"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>
        <ContentControl Content="{Binding ActiveView, UpdateSourceTrigger=PropertyChanged}"/>
    </Grid>
    
</UserControl>
